


<!doctype html>
<html class="no-js" lang="en">
  <head>
    
      <meta charset="utf-8">
      <meta content="width=device-width,initial-scale=1" name="viewport">
      
      
      
        <meta content="Oluwasegun Somefun" name="author">
      
      <link href="assets/images/favicon.png" rel="shortcut icon">
      <meta content="mkdocs-1.1.2, mkdocs-material-5.2.2" name="generator">
    
    
      
        <title>ModernPIDControlSS Documentation</title>
      
    
    
      <link href="assets/stylesheets/main.b8fb47b5.min.css" rel="stylesheet">
      
        <link href="assets/stylesheets/palette.36d1b78f.min.css" rel="stylesheet">
      
      
        
        
        <meta content="#3f51b5" name="theme-color">
      
    
    
    
      
        <link crossorigin href="https://fonts.gstatic.com" rel="preconnect">
        <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback" rel="stylesheet">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body data-md-color-accent="indigo" data-md-color-primary="indigo" data-md-color-scheme="default" dir="ltr">
  
    <input autocomplete="off" class="md-toggle" data-md-toggle="drawer" id="__drawer" type="checkbox">
    <input autocomplete="off" class="md-toggle" data-md-toggle="search" id="__search" type="checkbox">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a class="md-skip" href="#simplified-algorithm-for-a-modern-implementation-of-the-pid-law">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav aria-label="Header" class="md-header-nav md-grid">
    <a aria-label="ModernPIDControlSS Documentation" class="md-header-nav__button md-logo" href="." title="ModernPIDControlSS Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.42 5.29c-1.1-.1-2.07.71-2.17 1.82L10 10h2.82v2h-3l-.44 5.07A4.001 4.001 0 012 18.83l1.5-1.5c.33 1.05 1.46 1.64 2.5 1.3.78-.24 1.33-.93 1.4-1.74L7.82 12h-3v-2H8l.27-3.07a4.01 4.01 0 014.33-3.65c1.26.11 2.4.81 3.06 1.89l-1.5 1.5c-.25-.77-.93-1.31-1.74-1.38M22 13.65l-1.41-1.41-2.83 2.83-2.83-2.83-1.43 1.41 2.85 2.85-2.85 2.81 1.43 1.41 2.83-2.83 2.83 2.83L22 19.31l-2.83-2.81L22 13.65z"/></svg>

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            ModernPIDControlSS Documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Guide
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input aria-label="Search" autocapitalize="off" autocomplete="off" autocorrect="off" class="md-search__input" data-md-component="search-query" data-md-state="active" name="query" placeholder="Search" spellcheck="false" type="text">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button aria-label="Clear" class="md-search__icon md-icon" data-md-component="search-reset" tabindex="-1" type="reset">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a class="md-source" href="https://github.com/somefunagba/ModernPIDControlSS/" title="Go to repository">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ModernPIDControlSS
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

<nav aria-label="Tabs" class="md-tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a class="md-tabs__link md-tabs__link--active" href=".">
        Guide
      </a>
    
  </li>

      
        
  
  
    <li class="md-tabs__item">
      
        <a class="md-tabs__link" href="about/">
          About
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav aria-label="Navigation" class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a aria-label="ModernPIDControlSS Documentation" class="md-nav__button md-logo" href="." title="ModernPIDControlSS Documentation">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12.42 5.29c-1.1-.1-2.07.71-2.17 1.82L10 10h2.82v2h-3l-.44 5.07A4.001 4.001 0 012 18.83l1.5-1.5c.33 1.05 1.46 1.64 2.5 1.3.78-.24 1.33-.93 1.4-1.74L7.82 12h-3v-2H8l.27-3.07a4.01 4.01 0 014.33-3.65c1.26.11 2.4.81 3.06 1.89l-1.5 1.5c-.25-.77-.93-1.31-1.74-1.38M22 13.65l-1.41-1.41-2.83 2.83-2.83-2.83-1.43 1.41 2.85 2.85-2.85 2.81 1.43 1.41 2.83-2.83 2.83 2.83L22 19.31l-2.83-2.81L22 13.65z"/></svg>

    </a>
    ModernPIDControlSS Documentation
  </label>
  
    <div class="md-nav__source">
      
<a class="md-source" href="https://github.com/somefunagba/ModernPIDControlSS/" title="Go to repository">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ModernPIDControlSS
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" id="__toc" type="checkbox">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Guide
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a class="md-nav__link md-nav__link--active" href="." title="Guide">
      Guide
    </a>
    
      
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a class="md-nav__link" href="#pid-law-representation">
    PID Law: Representation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a class="md-nav__link" href="#usecase">
    Usecase
  </a>
  
    <nav aria-label="Usecase" class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a class="md-nav__link" href="#initializations">
    Initializations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a class="md-nav__link" href="#setup">
    Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a class="md-nav__link" href="#settling-time-identification-loop">
    Settling-Time Identification Loop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a class="md-nav__link" href="#pid-control-loop">
    PID-Control Loop
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a class="md-nav__link" href="#notice">
    Notice
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-2" id="nav-2" type="checkbox">
    
    <label class="md-nav__link" for="nav-2">
      About
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav aria-label="About" class="md-nav" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        About
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a class="md-nav__link" href="about/" title="About">
      About
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a class="md-nav__link" href="license/" title="License">
      License
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav aria-label="Table of contents" class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a class="md-nav__link" href="#pid-law-representation">
    PID Law: Representation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a class="md-nav__link" href="#usecase">
    Usecase
  </a>
  
    <nav aria-label="Usecase" class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a class="md-nav__link" href="#initializations">
    Initializations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a class="md-nav__link" href="#setup">
    Setup
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a class="md-nav__link" href="#settling-time-identification-loop">
    Settling-Time Identification Loop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a class="md-nav__link" href="#pid-control-loop">
    PID-Control Loop
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a class="md-nav__link" href="#notice">
    Notice
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a class="md-content__button md-icon" href="https://github.com/somefunagba/ModernPIDControlSS/edit/master/docs/index.md" title="Edit this page">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="simplified-algorithm-for-a-modern-implementation-of-the-pid-law">Simplified Algorithm for a Modern Implementation of the PID Law<a class="headerlink" href="#simplified-algorithm-for-a-modern-implementation-of-the-pid-law" title="Permanent link">&para;</a></h1>
<p><!-- abstract, summary, tldr, info, todo, tip , hint, important, success, check, done, faq, help, question-->
<!-- warning, attention, failure, error, bug, missing, example, quote, cite--></p>
<p>The PID law is still largely misunderstood. Some classify it as a simple and old control algorithm.
However, the PID law is the simplest representation of active inference in nature. It is the simplest representation of the complex intelligence of inference in nature. The PID law, actively tries to minimize the deviation of the sensed behaviour from the expected behaviour. It is a law for making inference based on an expected behaviour, and a sensed behaviour.</p>
<p>This means that the PID law is artificial intelligence (AI) for inference.
 Notably, Nicolai Minorsky realised this in the early nineties. It is clear that the representation of this AI is still far from mature.</p>
<p>In systems and control, this law is used as an algorithm for robust feedback control.
It infers the necessary control input <span><span class="MathJax_Preview">u</span><script type="math/tex">u</script></span> to a dynamical system, to reach an achievable expected output <span><span class="MathJax_Preview">r</span><script type="math/tex">r</script></span> of the dynamical system</p>
<p>Two main problems in this AI exist. The representation, and the design of AI. Research in the control literature has mostly focused on the latter.</p>
<div class="admonition summary">
<p class="admonition-title">Synopsis</p>
<p>In this library, using modern control theory, we provide for practical use, a simple but robust realization of the PID law represented in critic form.
The features implemented are compactly listed in the <a href="about/">about</a> page.
The problem of automatic design of the PID law for control is approached from the viewpoint of the 'closed PID-loop model'.
For a more technical understanding of this automatic tuning design, read the preprint at (<a href="https://arxiv.org/pdf/2006.00314">https://arxiv.org/pdf/2006.00314</a>).</p>
</div>
<p>Also, please see the <a href="license/">library license</a> for further details on library use.</p>
<h2 id="pid-law-representation">PID Law: Representation<a class="headerlink" href="#pid-law-representation" title="Permanent link">&para;</a></h2>
<p>The PID Law can be represented as a critic function: <span><span class="MathJax_Preview">u = f(r,y)</span><script type="math/tex">u = f(r,y)</script></span>
$$
u=f(r,y)=\lambda_p\,u_p + \lambda_i\,u_i + \lambda_d\,u_d
$$</p>
<!-- ## Tuning Usecase -->

<!--* `mkdocs new [dir-name]` - Create a new project.-->

<!--* `mkdocs serve` - Start the live-reloading docs server.-->

<!--* `mkdocs build` - Build the documentation site.-->

<!--* `mkdocs -h` - Print help message and exit.-->

<h2 id="usecase">Usecase<a class="headerlink" href="#usecase" title="Permanent link">&para;</a></h2>
<p>The tuning method included in this library as default is the CPLMFC.
The process is illustrated as shown:</p>
<p><img alt="cplmfc_process" src="img/cplmfc_overviewanimated.gif" /></p>
<h3 id="initializations">Initializations<a class="headerlink" href="#initializations" title="Permanent link">&para;</a></h3>
<div class="tabbed-set" data-tabs="1:1"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><label for="__tabbed_1_1">C++</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code><span class="cp">#include</span> <span class="cpf">&quot;Arduino.h&quot;</span><span class="cp"></span>
<span class="cm">/* PID Library Include Files */</span>
<span class="cp">#include</span> <span class="cpf">&quot;ModernPIDControlSS.h&quot;</span><span class="cp"></span>

<span class="cm">/* Global Declarations */</span>
<span class="cm">/* Tuning Parameters */</span>
<span class="kt">double</span> <span class="n">wn</span><span class="p">;</span>
<span class="kt">float</span> <span class="n">alpha</span><span class="p">;</span>

<span class="cm">/* Timing Information */</span>
<span class="kt">double</span> <span class="n">L</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">ts</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">dt</span> <span class="o">=</span> <span class="mf">0.01</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">t</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>

<span class="k">const</span> <span class="kt">double</span> <span class="n">r</span> <span class="o">=</span> <span class="mf">150.0</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="kt">int</span> <span class="n">countseq</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="k">const</span> <span class="kt">int</span> <span class="n">umin</span> <span class="o">=</span> <span class="o">-</span><span class="mi">255</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">umax</span> <span class="o">=</span> <span class="mi">255</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">dead_max</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="k">const</span> <span class="kt">int</span> <span class="n">dead_min</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span> <span class="c1">// zero tolerance limits</span>

<span class="cm">/* Parameters PID Structure Config. */</span>
<span class="n">PIDNet</span> <span class="nf">PIDobj_II</span><span class="p">(</span><span class="n">r</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">dt</span><span class="p">,</span> <span class="n">umax</span><span class="p">,</span> <span class="n">umin</span><span class="p">);</span>
</code></pre></div>

<h3 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h3>
<div class="tabbed-set" data-tabs="2:1"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><label for="__tabbed_2_1">C++</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code><span class="kt">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Turn on Serial Comms.</span>
    <span class="c1">// 9600 baud is a compromise setting for easy killing of a runaway process</span>
    <span class="c1">// and very slow process</span>
    <span class="n">Serial</span><span class="p">.</span><span class="n">begin</span><span class="p">(</span><span class="mi">9600</span><span class="p">);</span> <span class="c1">// Can Go Up to 2M</span>
    <span class="n">PIDobj_II</span><span class="p">.</span><span class="n">Ts</span> <span class="o">=</span> <span class="n">dt</span><span class="p">;</span>
    <span class="cm">/* Parameters PID Structure Config. */</span>
    <span class="n">PIDobj_II</span><span class="p">.</span><span class="n">b</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// optional</span>
    <span class="n">PIDobj_II</span><span class="p">.</span><span class="n">c</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// optional</span>
    <span class="n">PIDobj_II</span><span class="p">.</span><span class="n">follow</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// optional</span>


    <span class="cm">/* CPLMFC Tuning HyperParameter Config. */</span>
    <span class="kt">int</span> <span class="n">Nts</span> <span class="o">=</span> <span class="mi">228</span><span class="p">;</span> <span class="c1">// settling horizon: set after settling-time identification</span>
    <span class="n">ts</span> <span class="o">=</span> <span class="n">Nts</span><span class="o">*</span><span class="n">dt</span><span class="p">;</span> <span class="c1">// settling time (including delay time)</span>
    <span class="n">L</span> <span class="o">=</span> <span class="mi">0</span><span class="o">*</span><span class="n">dt</span><span class="p">;</span> <span class="c1">// estimated transport or delay time</span>
    <span class="cm">/* Hyper-Parameter for Kp and Critic Weights */</span>
    <span class="n">alpha</span> <span class="o">=</span> <span class="mf">20.0</span><span class="p">;</span> <span class="c1">//  for P</span>
    <span class="c1">// for D</span>
    <span class="n">PIDobj_II</span><span class="p">.</span><span class="n">lambdad</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">;</span>
    <span class="c1">// I</span>
    <span class="n">PIDobj_II</span><span class="p">.</span><span class="n">lambdai</span> <span class="o">=</span> <span class="mf">0.5</span><span class="p">;</span>

    <span class="cm">/* PID Commonsense Model Config. */</span>
    <span class="cm">/* Natural Frequency for PID Commonsense */</span>
    <span class="n">tuneWn</span><span class="p">(</span><span class="n">PIDobj_II</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">wn</span><span class="p">);</span>
    <span class="c1">//Serial.println(wn);// debug</span>
<span class="p">}</span>
</code></pre></div>

<h3 id="settling-time-identification-loop">Settling-Time Identification Loop<a class="headerlink" href="#settling-time-identification-loop" title="Permanent link">&para;</a></h3>
<div class="tabbed-set" data-tabs="3:1"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><label for="__tabbed_3_1">C++</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code>        <span class="p">...</span>
        <span class="cm">/* SYS ID- START */</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">sys_id</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">countseq</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="n">ref_id</span> <span class="o">=</span> <span class="mi">1</span><span class="o">*</span><span class="mi">255</span><span class="p">;</span>
                <span class="n">PIDobj_II</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="mi">1</span><span class="o">*</span><span class="mi">255</span><span class="p">;</span>
            <span class="p">}</span>
            <span class="n">PIDobj_II</span><span class="p">.</span><span class="n">u</span> <span class="o">=</span> <span class="n">ref_id</span> <span class="o">-</span> <span class="n">PIDobj_II</span><span class="p">.</span><span class="n">y</span><span class="p">;</span> <span class="c1">// SYS ID- END</span>
        <span class="p">}</span>
        <span class="p">...</span>
</code></pre></div>

<h3 id="pid-control-loop">PID-Control Loop<a class="headerlink" href="#pid-control-loop" title="Permanent link">&para;</a></h3>
<div class="tabbed-set" data-tabs="4:1"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><label for="__tabbed_4_1">C++</label><div class="tabbed-content"></div>
</div>
<div class="highlight"><pre><span></span><code>    <span class="p">...</span>
    <span class="n">tstart</span> <span class="o">=</span> <span class="n">micros</span><span class="p">()</span><span class="o">/</span><span class="kt">double</span><span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">t</span> <span class="o">-</span> <span class="n">tstart</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">t</span> <span class="o">&gt;=</span><span class="p">(</span> <span class="p">(</span><span class="n">PIDobj_II</span><span class="p">.</span><span class="n">T_prev</span><span class="o">+</span><span class="n">PIDobj_II</span><span class="p">.</span><span class="n">Ts</span><span class="p">)</span><span class="o">-</span><span class="p">(</span><span class="mf">0.5</span><span class="o">*</span><span class="n">PIDobj_II</span><span class="p">.</span><span class="n">Ts</span><span class="p">)</span> <span class="p">))</span> <span class="p">{</span>

        <span class="cm">/* CPLM Evolution */</span>
        <span class="n">cplm_kernel</span><span class="p">(</span><span class="n">PIDobj_II</span><span class="p">.</span><span class="n">ym</span><span class="p">,</span> <span class="n">PIDobj_II</span><span class="p">.</span><span class="n">xm</span><span class="p">,</span> <span class="n">PIDobj_II</span><span class="p">.</span><span class="n">r</span><span class="p">,</span>
               <span class="n">PIDobj_II</span><span class="p">.</span><span class="n">Ts</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">wn</span><span class="p">);</span>
        <span class="c1">// Serial.print(&quot;ym: &quot;); Serial.println(PIDobj_II.ym);</span>
        <span class="cm">/* CPLMFC Tuning Computation */</span>
        <span class="n">tuneKp</span><span class="p">(</span><span class="n">PIDobj_II</span><span class="p">,</span> <span class="n">t</span><span class="p">,</span> <span class="n">L</span><span class="p">,</span> <span class="n">ts</span><span class="p">,</span> <span class="n">alpha</span><span class="p">,</span> <span class="mi">2</span><span class="p">);</span>
        <span class="c1">//Serial.print(&quot;Kp: &quot;);Serial.println(PIDobj_II.Kp);</span>

        <span class="n">tuneKi</span><span class="p">(</span><span class="n">PIDobj_II</span><span class="p">,</span> <span class="n">wn</span><span class="p">);</span>
        <span class="c1">//Serial.print(&quot; Ki: &quot;);Serial.print(PIDobj_II.Ki);</span>

        <span class="n">tuneKd</span><span class="p">(</span><span class="n">PIDobj_II</span><span class="p">,</span> <span class="n">wn</span><span class="p">);</span>
        <span class="c1">//Serial.print(&quot; Kd: &quot;);Serial.println(PIDobj_II.Kd);</span>

        <span class="cm">/* PID Control State Evolution: Architecture */</span>
        <span class="n">sfunPID_kernel</span><span class="p">(</span><span class="n">PIDobj_II</span><span class="p">,</span> <span class="n">t</span><span class="p">);</span>
        <span class="c1">//Serial.print(&quot;upwm_II: &quot;); Serial.println(PIDobj_II.u);</span>
    <span class="p">}</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">micros</span><span class="p">()</span><span class="o">/</span><span class="kt">double</span><span class="p">(</span><span class="mi">1000000</span><span class="p">);</span>
    <span class="p">...</span>
</code></pre></div>

<h2 id="notice">Notice<a class="headerlink" href="#notice" title="Permanent link">&para;</a></h2>
<p>Please, this Guide is still a draft (beta). It will be updated gradually.</p>
<div class="admonition faq">
<p class="admonition-title">Faq</p>
<p>Please, feel free to contact me at <a href="&#109;&#97;&#105;&#108;&#116;&#111;&#58;&#111;&#97;&#115;&#111;&#109;&#101;&#102;&#117;&#110;&#64;&#102;&#117;&#116;&#97;&#46;&#101;&#100;&#117;&#46;&#110;&#103;">&#111;&#97;&#115;&#111;&#109;&#101;&#102;&#117;&#110;&#64;&#102;&#117;&#116;&#97;&#46;&#101;&#100;&#117;&#46;&#110;&#103;</a> for any questions or to report any bug.</p>
</div>
<!--    mkdocs.yml    # The configuration file.-->

<!--    docs/-->

<!--        index.md  # The documentation homepage.-->

<!--        ...       # Other markdown pages, images and other files.-->
                
                  
                    

<hr>
<div class="md-source-date">
  <small>
    
      Last update: June 8, 2020
    
  </small>
</div>
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav aria-label="Footer" class="md-footer-nav__inner md-grid">
        
        
          <a class="md-footer-nav__link md-footer-nav__link--next" href="about/" rel="next" title="About">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                About
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2020-20xx Oluwasegun Somefun
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank">
          Material for MkDocs
        </a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/vendor.de50e36d.min.js"></script>
      <script src="assets/javascripts/bundle.ff925e8b.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: ".",
          features: ["tabs", "instant"],
          search: Object.assign({
            worker: "assets/javascripts/worker/search.27c6a5e6.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
        <script src="javascripts/extra.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML"></script>
      
    
  </body>
</html>